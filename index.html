<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerProfile - Build Your Professional Identity</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b border-blue-200" id="navBar">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl shadow-lg">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">CareerProfile</h1>
                        <p class="text-xs text-gray-600">Your Lifetime Professional Identity</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4" id="authButtons">
                    <button onclick="showLogin()" class="text-blue-600 hover:text-blue-800 font-semibold">Login</button>
                    <button onclick="showSignup()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition font-semibold">Sign Up Free</button>
                </div>
                <div class="hidden items-center space-x-4" id="userMenu">
                    <span class="text-gray-700" id="userGreeting">Welcome, User!</span>
                    <button onclick="logout()" class="text-gray-600 hover:text-gray-800 font-semibold">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Authentication Section -->
    <div id="authSection" class="max-w-md mx-auto mt-12 bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
        <div id="loginForm">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Welcome Back</h2>
            <p class="text-gray-600 mb-6">Sign in to your CareerProfile</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                    <input type="email" id="loginEmail" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="your.email@example.com">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Password</label>
                    <input type="password" id="loginPassword" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="Your password">
                </div>
                <button onclick="login()" class="w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition font-semibold">
                    Sign In
                </button>
            </div>
            
            <div class="text-center mt-4">
                <span class="text-gray-600">Don't have an account? </span>
                <button onclick="showSignup()" class="text-blue-600 hover:text-blue-800 font-semibold">Sign up here</button>
            </div>
        </div>

        <div id="signupForm" class="hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Start Your Career Journey</h2>
            <p class="text-gray-600 mb-6">Create your free CareerProfile account</p>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Full Name</label>
                    <input type="text" id="signupName" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="John Doe">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                    <input type="email" id="signupEmail" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="your.email@example.com">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Password</label>
                    <input type="password" id="signupPassword" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="Create a strong password">
                </div>
                <button onclick="signup()" class="w-full bg-green-600 text-white py-3 rounded-xl hover:bg-green-700 transition font-semibold">
                    Create Account
                </button>
            </div>
            
            <div class="text-center mt-4">
                <span class="text-gray-600">Already have an account? </span>
                <button onclick="showLogin()" class="text-blue-600 hover:text-blue-800 font-semibold">Sign in here</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appSection" class="hidden max-w-6xl mx-auto py-8 px-4">
        <!-- Progress Overview -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8">
            <div class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800" id="welcomeMessage">Welcome back!</h2>
                    <p class="text-gray-600">Build your comprehensive career profile</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600 mb-1">Profile Completeness</div>
                    <div class="w-48 bg-gray-200 rounded-full h-3">
                        <div id="profileProgress" class="bg-green-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <div class="text-sm text-gray-700 mt-1" id="progressText">0% Complete</div>
                </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="bg-blue-50 rounded-xl p-4 border border-blue-200">
                    <div class="text-2xl font-bold text-blue-600" id="basicInfoScore">0%</div>
                    <div class="text-sm text-blue-700">Basic Info</div>
                </div>
                <div class="bg-orange-50 rounded-xl p-4 border border-orange-200">
                    <div class="text-2xl font-bold text-orange-600" id="experienceScore">0%</div>
                    <div class="text-sm text-orange-700">Experience</div>
                </div>
                <div class="bg-purple-50 rounded-xl p-4 border border-purple-200">
                    <div class="text-2xl font-bold text-purple-600" id="educationScore">0%</div>
                    <div class="text-sm text-purple-700">Education</div>
                </div>
                <div class="bg-green-50 rounded-xl p-4 border border-green-200">
                    <div class="text-2xl font-bold text-green-600" id="skillsScore">0%</div>
                    <div class="text-sm text-green-700">Skills</div>
                </div>
            </div>
        </div>

        <!-- Profile Sections -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Navigation Sidebar -->
            <div class="lg:col-span-1 space-y-4">
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
                    <h3 class="font-semibold text-gray-800 mb-4">Your Profile Sections</h3>
                    <div class="space-y-2">
                        <button onclick="showSection('personal')" class="w-full text-left p-3 rounded-xl hover:bg-blue-50 transition font-semibold text-blue-700 border-2 border-blue-200 bg-blue-50">
                            üë§ Personal Information
                        </button>
                        <button onclick="showSection('summary')" class="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition font-semibold text-gray-700">
                            üìù Professional Summary
                        </button>
                        <button onclick="showSection('experience')" class="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition font-semibold text-gray-700">
                            üíº Work Experience
                        </button>
                        <button onclick="showSection('education')" class="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition font-semibold text-gray-700">
                            üéì Education
                        </button>
                        <button onclick="showSection('skills')" class="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition font-semibold text-gray-700">
                            üõ†Ô∏è Skills & Expertise
                        </button>
                        <button onclick="showSection('certifications')" class="w-full text-left p-3 rounded-xl hover:bg-gray-50 transition font-semibold text-gray-700">
                            üìú Certifications
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
                    <h3 class="font-semibold text-gray-800 mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button onclick="saveProfile()" class="w-full bg-green-600 text-white py-3 rounded-xl hover:bg-green-700 transition font-semibold">
                            üíæ Save All Changes
                        </button>
                        <button onclick="exportData()" class="w-full bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 transition font-semibold">
                            üì§ Export Profile
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="lg:col-span-2">
                <!-- Personal Information Section -->
                <div id="personalSection" class="profile-section bg-white rounded-2xl shadow-lg border border-gray-100 p-8">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                            <span class="text-blue-600 text-lg">üë§</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">Personal Information</h3>
                    </div>

                    <div class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Full Name *</label>
                                <input type="text" id="fullName" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="John Doe">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Professional Title</label>
                                <input type="text" id="professionalTitle" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="Senior Software Engineer">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Email Address *</label>
                                <input type="email" id="email" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="john.doe@example.com">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Phone Number</label>
                                <input type="tel" id="phone" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="+1 (555) 123-4567">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Location</label>
                                <input type="text" id="location" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="San Francisco, CA">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">LinkedIn Profile</label>
                                <input type="url" id="linkedin" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="https://linkedin.com/in/johndoe">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Website/Portfolio</label>
                                <input type="url" id="portfolio" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="https://yourportfolio.com">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Target Salary Range</label>
                                <input type="text" id="targetSalary" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="$80,000 - $120,000">
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Visa Status</label>
                                <select id="visaStatus" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition">
                                    <option value="">Select visa status</option>
                                    <option value="citizen">Citizen</option>
                                    <option value="permanent_resident">Permanent Resident</option>
                                    <option value="work_visa">Work Visa</option>
                                    <option value="student_visa">Student Visa</option>
                                    <option value="requires_sponsorship">Requires Sponsorship</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Willing to Relocate?</label>
                                <select id="relocate" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition">
                                    <option value="">Select preference</option>
                                    <option value="yes">Yes, anywhere</option>
                                    <option value="within_country">Within country</option>
                                    <option value="specific_locations">Specific locations only</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other sections will be added here (summary, experience, education, skills, certifications) -->
                <div id="otherSections" class="hidden">
                    <!-- These will be implemented in Phase 2 -->
                    <div class="text-center py-12">
                        <div class="text-6xl mb-4">üöß</div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Section Under Development</h3>
                        <p class="text-gray-600">This section will be available in the next update!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="fixed top-4 right-4 p-4 rounded-xl shadow-lg z-50 transform translate-x-96 transition-transform duration-300 hidden">
        <div class="flex items-center space-x-3">
            <span id="toastIcon">‚úÖ</span>
            <span id="toastMessage" class="font-semibold"></span>
        </div>
    </div>

    <script>
        // ==================== FIREBASE CONFIGURATION ====================
        const firebaseConfig = {
            apiKey: "AIzaSyA_Si4j_KI1ufVg0_tthDFZjkrnYs-XNtE",
            authDomain: "resume-ai-platform.firebaseapp.com",
            projectId: "resume-ai-platform",
            storageBucket: "resume-ai-platform.firebasestorage.app",
            messagingSenderId: "246570862355",
            appId: "1:246570862355:web:4f4e2e3e3fdf366d95bce6"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Current user data
        let currentUser = null;
        let userProfile = {};

        // ==================== AUTHENTICATION FUNCTIONS ====================
        
        function showLogin() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('signupForm').classList.add('hidden');
        }

        function showSignup() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('signupForm').classList.remove('hidden');
        }

        function signup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    currentUser = userCredential.user;
                    
                    // Create initial user profile
                    userProfile = {
                        personal: {
                            fullName: name,
                            email: email,
                            professionalTitle: '',
                            phone: '',
                            location: '',
                            linkedin: '',
                            portfolio: '',
                            targetSalary: '',
                            visaStatus: '',
                            relocate: ''
                        },
                        summary: '',
                        experience: [],
                        education: [],
                        skills: [],
                        certifications: [],
                        createdAt: new Date(),
                        lastUpdated: new Date()
                    };

                    // Save profile to Firestore
                    return db.collection('profiles').doc(currentUser.uid).set(userProfile);
                })
                .then(() => {
                    showToast('Account created successfully!', 'success');
                    showApp();
                    loadUserProfile();
                })
                .catch((error) => {
                    showToast('Error creating account: ' + error.message, 'error');
                });
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    currentUser = userCredential.user;
                    showToast('Welcome back!', 'success');
                    showApp();
                    loadUserProfile();
                })
                .catch((error) => {
                    showToast('Error signing in: ' + error.message, 'error');
                });
        }

        function logout() {
            auth.signOut()
                .then(() => {
                    currentUser = null;
                    userProfile = {};
                    showToast('Signed out successfully', 'success');
                    showAuth();
                })
                .catch((error) => {
                    showToast('Error signing out: ' + error.message, 'error');
                });
        }

        // ==================== PROFILE MANAGEMENT ====================
        
        function loadUserProfile() {
            if (!currentUser) return;

            db.collection('profiles').doc(currentUser.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        userProfile = doc.data();
                        populateForm();
                        updateProgress();
                    }
                })
                .catch((error) => {
                    console.error('Error loading profile:', error);
                });
        }

        function populateForm() {
            if (!userProfile.personal) return;

            const personal = userProfile.personal;
            document.getElementById('fullName').value = personal.fullName || '';
            document.getElementById('professionalTitle').value = personal.professionalTitle || '';
            document.getElementById('email').value = personal.email || '';
            document.getElementById('phone').value = personal.phone || '';
            document.getElementById('location').value = personal.location || '';
            document.getElementById('linkedin').value = personal.linkedin || '';
            document.getElementById('portfolio').value = personal.portfolio || '';
            document.getElementById('targetSalary').value = personal.targetSalary || '';
            document.getElementById('visaStatus').value = personal.visaStatus || '';
            document.getElementById('relocate').value = personal.relocate || '';

            // Update welcome message
            document.getElementById('welcomeMessage').textContent = `Welcome back, ${personal.fullName || 'there'}!`;
            document.getElementById('userGreeting').textContent = `Hi, ${personal.fullName || 'User'}`;
        }

        function saveProfile() {
            if (!currentUser) return;

            // Update personal information
            userProfile.personal = {
                fullName: document.getElementById('fullName').value,
                professionalTitle: document.getElementById('professionalTitle').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                linkedin: document.getElementById('linkedin').value,
                portfolio: document.getElementById('portfolio').value,
                targetSalary: document.getElementById('targetSalary').value,
                visaStatus: document.getElementById('visaStatus').value,
                relocate: document.getElementById('relocate').value
            };

            userProfile.lastUpdated = new Date();

            db.collection('profiles').doc(currentUser.uid).set(userProfile)
                .then(() => {
                    showToast('Profile saved successfully!', 'success');
                    updateProgress();
                })
                .catch((error) => {
                    showToast('Error saving profile: ' + error.message, 'error');
                });
        }

        // ==================== PROGRESS TRACKING ====================
        
        function updateProgress() {
            if (!userProfile.personal) return;

            let totalScore = 0;
            let maxScore = 0;

            // Personal Information Score (40 points max)
            const personalFields = ['fullName', 'email', 'professionalTitle', 'phone', 'location'];
            let personalScore = 0;
            personalFields.forEach(field => {
                if (userProfile.personal[field] && userProfile.personal[field].trim()) {
                    personalScore += 8; // 8 points per field
                }
            });
            totalScore += Math.min(personalScore, 40);
            maxScore += 40;

            // Update progress bars
            const personalPercent = Math.round((personalScore / 40) * 100);
            document.getElementById('basicInfoScore').textContent = personalPercent + '%';
            document.getElementById('profileProgress').style.width = personalPercent + '%';
            document.getElementById('progressText').textContent = personalPercent + '% Complete';

            // Other sections will be 0% for now (Phase 2)
            document.getElementById('experienceScore').textContent = '0%';
            document.getElementById('educationScore').textContent = '0%';
            document.getElementById('skillsScore').textContent = '0%';
        }

        // ==================== UI FUNCTIONS ====================
        
        function showAuth() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('appSection').classList.add('hidden');
            document.getElementById('authButtons').classList.remove('hidden');
            document.getElementById('userMenu').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            document.getElementById('authButtons').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('hidden');
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.profile-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            if (sectionName === 'personal') {
                document.getElementById('personalSection').classList.remove('hidden');
            } else {
                document.getElementById('otherSections').classList.remove('hidden');
                // In Phase 2, we'll show the actual sections
            }

            // Update navigation buttons
            document.querySelectorAll('#navigationSidebar button').forEach(button => {
                button.classList.remove('bg-blue-50', 'border-blue-200', 'text-blue-700');
                button.classList.add('text-gray-700', 'hover:bg-gray-50');
            });
            
            event.target.classList.add('bg-blue-50', 'border-blue-200', 'text-blue-700');
            event.target.classList.remove('text-gray-700', 'hover:bg-gray-50');
        }

        function showToast(message, type) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');

            // Set icon and color based on type
            if (type === 'success') {
                toast.className = toast.className.replace('bg-red-100 text-red-800 border-red-200', '');
                toast.className += ' bg-green-100 text-green-800 border border-green-200';
                toastIcon.textContent = '‚úÖ';
            } else if (type === 'error') {
                toast.className = toast.className.replace('bg-green-100 text-green-800 border-green-200', '');
                toast.className += ' bg-red-100 text-red-800 border border-red-200';
                toastIcon.textContent = '‚ùå';
            }

            toastMessage.textContent = message;
            toast.classList.remove('hidden', 'translate-x-96');
            toast.classList.add('translate-x-0');

            // Auto hide after 3 seconds
            setTimeout(() => {
                toast.classList.remove('translate-x-0');
                toast.classList.add('translate-x-96');
            }, 3000);
        }

        function exportData() {
            showToast('Export feature coming in Phase 2!', 'success');
        }

        // ==================== AUTO-SAVE ====================
        
        document.querySelectorAll('input, select, textarea').forEach(element => {
            element.addEventListener('input', () => {
                // Auto-save after 2 seconds of inactivity
                clearTimeout(window.autoSaveTimeout);
                window.autoSaveTimeout = setTimeout(saveProfile, 2000);
            });
        });

        // ==================== INITIALIZATION ====================
        
        // Check auth state on load
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                showApp();
                loadUserProfile();
            } else {
                showAuth();
            }
        });

        // Initialize the first section
        document.addEventListener('DOMContentLoaded', function() {
            showSection('personal');
        });
    </script>
</body>
</html>
