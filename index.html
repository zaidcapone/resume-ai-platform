<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerProfile - Complete Professional Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg border-b border-blue-200">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-xl">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">CareerProfile</h1>
                        <p class="text-xs text-gray-600">Complete Professional Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4" id="authButtons">
                    <button onclick="showLogin()" class="text-blue-600 hover:text-blue-800 font-semibold">Login</button>
                    <button onclick="showSignup()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition font-semibold">Sign Up Free</button>
                </div>
                <div class="hidden items-center space-x-4" id="userMenu">
                    <span class="text-gray-700" id="userGreeting">Welcome, User!</span>
                    <button onclick="logout()" class="text-gray-600 hover:text-gray-800 font-semibold">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Authentication -->
    <div id="authSection" class="max-w-md mx-auto mt-12 bg-white rounded-xl shadow-lg p-8">
        <div id="loginForm">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Welcome Back</h2>
            <div class="space-y-4">
                <input type="email" id="loginEmail" placeholder="Email" class="w-full p-3 border rounded-lg">
                <input type="password" id="loginPassword" placeholder="Password" class="w-full p-3 border rounded-lg">
                <button onclick="login()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700">Sign In</button>
            </div>
            <div class="text-center mt-4">
                <button onclick="showSignup()" class="text-blue-600 hover:text-blue-800">Create Account</button>
            </div>
        </div>

        <div id="signupForm" class="hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Create Account</h2>
            <div class="space-y-4">
                <input type="text" id="signupName" placeholder="Full Name" class="w-full p-3 border rounded-lg">
                <input type="email" id="signupEmail" placeholder="Email" class="w-full p-3 border rounded-lg">
                <input type="password" id="signupPassword" placeholder="Password" class="w-full p-3 border rounded-lg">
                <button onclick="signup()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700">Sign Up</button>
            </div>
            <div class="text-center mt-4">
                <button onclick="showLogin()" class="text-blue-600 hover:text-blue-800">Back to Login</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appSection" class="hidden max-w-7xl mx-auto py-8 px-4">
        <!-- Dashboard Tabs -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <div class="flex space-x-8 border-b">
                <button class="tab-button py-3 px-4 border-b-2 border-blue-600 text-blue-600 font-semibold" onclick="showTab('profile')">üè† Profile Builder</button>
                <button class="tab-button py-3 px-4 border-b-2 border-transparent text-gray-600 hover:text-gray-800" onclick="showTab('resume')">üìÑ Resume Generator</button>
                <button class="tab-button py-3 px-4 border-b-2 border-transparent text-gray-600 hover:text-gray-800" onclick="showTab('jobs')">üíº Job Matcher</button>
            </div>
        </div>

        <!-- Profile Builder Tab -->
        <div id="profileTab" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                <!-- Navigation -->
                <div class="lg:col-span-1 space-y-4">
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">Profile Sections</h3>
                        <div class="space-y-2">
                            <button onclick="showProfileSection('personal')" class="w-full text-left p-3 rounded-lg hover:bg-blue-50 text-blue-700 font-semibold bg-blue-50">üë§ Personal</button>
                            <button onclick="showProfileSection('summary')" class="w-full text-left p-3 rounded-lg hover:bg-gray-50 text-gray-700">üìù Summary</button>
                            <button onclick="showProfileSection('experience')" class="w-full text-left p-3 rounded-lg hover:bg-gray-50 text-gray-700">üíº Experience</button>
                            <button onclick="showProfileSection('education')" class="w-full text-left p-3 rounded-lg hover:bg-gray-50 text-gray-700">üéì Education</button>
                            <button onclick="showProfileSection('skills')" class="w-full text-left p-3 rounded-lg hover:bg-gray-50 text-gray-700">üõ†Ô∏è Skills</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">Profile Progress</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span>Overall Progress</span>
                                    <span id="overallProgress">0%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div id="progressBar" class="bg-green-600 h-2 rounded-full transition-all" style="width: 0%"></div>
                                </div>
                            </div>
                            <button onclick="saveProfile()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">üíæ Save All</button>
                        </div>
                    </div>
                </div>

                <!-- Profile Content -->
                <div class="lg:col-span-3">
                    <!-- Personal Information -->
                    <div id="personalSection" class="profile-section bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">üë§ Personal Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="text" id="fullName" placeholder="Full Name" class="p-3 border rounded-lg">
                            <input type="text" id="professionalTitle" placeholder="Professional Title" class="p-3 border rounded-lg">
                            <input type="email" id="email" placeholder="Email" class="p-3 border rounded-lg">
                            <input type="tel" id="phone" placeholder="Phone" class="p-3 border rounded-lg">
                            <input type="text" id="location" placeholder="Location" class="p-3 border rounded-lg">
                            <input type="url" id="linkedin" placeholder="LinkedIn URL" class="p-3 border rounded-lg">
                        </div>
                    </div>

                    <!-- Professional Summary -->
                    <div id="summarySection" class="profile-section hidden bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">üìù Professional Summary</h3>
                        <textarea id="summary" placeholder="Write a compelling professional summary..." class="w-full p-4 border rounded-lg h-32"></textarea>
                    </div>

                    <!-- Work Experience -->
                    <div id="experienceSection" class="profile-section hidden bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">üíº Work Experience</h3>
                            <button onclick="addExperience()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">+ Add Experience</button>
                        </div>
                        <div id="experienceContainer"></div>
                    </div>

                    <!-- Education -->
                    <div id="educationSection" class="profile-section hidden bg-white rounded-xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-800">üéì Education</h3>
                            <button onclick="addEducation()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">+ Add Education</button>
                        </div>
                        <div id="educationContainer"></div>
                    </div>

                    <!-- Skills -->
                    <div id="skillsSection" class="profile-section hidden bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-6">üõ†Ô∏è Skills & Expertise</h3>
                        <textarea id="skills" placeholder="List your skills (one per line)..." class="w-full p-4 border rounded-lg h-32"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resume Generator Tab -->
        <div id="resumeTab" class="tab-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üìÑ AI Resume Generator</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4">Resume Preview</h3>
                        <div class="bg-gray-50 border rounded-lg p-6 h-96 overflow-y-auto">
                            <div id="resumePreview">
                                <p class="text-gray-600">Your resume will appear here...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4">Export Options</h3>
                        <div class="space-y-4">
                            <button onclick="generateResume()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700">üîÑ Generate Resume</button>
                            <button onclick="downloadPDF()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700">üìÑ Download PDF</button>
                            <button onclick="downloadWord()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700">üìù Download Word</button>
                        </div>
                        
                        <div class="mt-6">
                            <h3 class="font-semibold text-gray-800 mb-4">AI Enhancements</h3>
                            <button onclick="enhanceWithAI()" class="w-full bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700">ü§ñ AI Enhance Resume</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Job Matcher Tab -->
        <div id="jobsTab" class="tab-content hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">üíº AI Job Matcher</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4">Paste Job Description</h3>
                        <textarea id="jobDescription" placeholder="Paste the job description here..." class="w-full p-4 border rounded-lg h-64"></textarea>
                        <button onclick="analyzeJob()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 mt-4">üéØ Analyze Job Match</button>
                    </div>
                    
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-4">Match Results</h3>
                        <div id="matchResults" class="bg-gray-50 border rounded-lg p-6">
                            <p class="text-gray-600">Job match analysis will appear here...</p>
                        </div>
                        
                        <div class="mt-6 grid grid-cols-2 gap-4" id="matchScores" class="hidden">
                            <div class="text-center bg-blue-50 rounded-lg p-4">
                                <div class="text-2xl font-bold text-blue-600" id="skillsMatch">0%</div>
                                <div class="text-sm text-blue-700">Skills Match</div>
                            </div>
                            <div class="text-center bg-green-50 rounded-lg p-4">
                                <div class="text-2xl font-bold text-green-600" id="experienceMatch">0%</div>
                                <div class="text-sm text-green-700">Experience Match</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== FIREBASE CONFIG ====================
        const firebaseConfig = {
            apiKey: "AIzaSyA_Si4j_KI1ufVg0_tthDFZjkrnYs-XNtE",
            authDomain: "resume-ai-platform.firebaseapp.com",
            projectId: "resume-ai-platform",
            storageBucket: "resume-ai-platform.firebasestorage.app",
            messagingSenderId: "246570862355",
            appId: "1:246570862355:web:4f4e2e3e3fdf366d95bce6"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentUser = null;
        let userProfile = {};

        // ==================== AUTHENTICATION ====================
        function showLogin() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('signupForm').classList.add('hidden');
        }

        function showSignup() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('signupForm').classList.remove('hidden');
        }

        function signup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    currentUser = userCredential.user;
                    userProfile = {
                        personal: { fullName: name, email: email },
                        summary: '',
                        experience: [],
                        education: [],
                        skills: ''
                    };
                    return db.collection('profiles').doc(currentUser.uid).set(userProfile);
                })
                .then(() => {
                    alert('Account created!');
                    showApp();
                    loadUserProfile();
                })
                .catch((error) => alert('Error: ' + error.message));
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    currentUser = userCredential.user;
                    showApp();
                    loadUserProfile();
                })
                .catch((error) => alert('Error: ' + error.message));
        }

        function logout() {
            auth.signOut().then(() => {
                currentUser = null;
                userProfile = {};
                showAuth();
            });
        }

        // ==================== PROFILE MANAGEMENT ====================
        function loadUserProfile() {
            db.collection('profiles').doc(currentUser.uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        userProfile = doc.data();
                        populateForm();
                        updateProgress();
                    }
                });
        }

        function populateForm() {
            if (userProfile.personal) {
                document.getElementById('fullName').value = userProfile.personal.fullName || '';
                document.getElementById('professionalTitle').value = userProfile.personal.professionalTitle || '';
                document.getElementById('email').value = userProfile.personal.email || '';
                document.getElementById('phone').value = userProfile.personal.phone || '';
                document.getElementById('location').value = userProfile.personal.location || '';
                document.getElementById('linkedin').value = userProfile.personal.linkedin || '';
            }
            document.getElementById('summary').value = userProfile.summary || '';
            document.getElementById('skills').value = userProfile.skills || '';
            
            // Load experiences
            const expContainer = document.getElementById('experienceContainer');
            expContainer.innerHTML = '';
            if (userProfile.experience) {
                userProfile.experience.forEach(exp => addExperience(exp));
            } else {
                addExperience();
            }

            // Load education
            const eduContainer = document.getElementById('educationContainer');
            eduContainer.innerHTML = '';
            if (userProfile.education) {
                userProfile.education.forEach(edu => addEducation(edu));
            } else {
                addEducation();
            }
        }

        function saveProfile() {
            userProfile.personal = {
                fullName: document.getElementById('fullName').value,
                professionalTitle: document.getElementById('professionalTitle').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                linkedin: document.getElementById('linkedin').value
            };
            userProfile.summary = document.getElementById('summary').value;
            userProfile.skills = document.getElementById('skills').value;

            db.collection('profiles').doc(currentUser.uid).set(userProfile)
                .then(() => {
                    alert('Profile saved!');
                    updateProgress();
                });
        }

        // ==================== EXPERIENCE & EDUCATION ====================
        function addExperience(expData = {}) {
            const container = document.getElementById('experienceContainer');
            const expId = 'exp_' + Date.now();
            const expHtml = `
                <div class="border rounded-lg p-4 mb-4" data-id="${expId}">
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <input type="text" class="p-2 border rounded exp-title" placeholder="Job Title" value="${expData.title || ''}">
                        <input type="text" class="p-2 border rounded exp-company" placeholder="Company" value="${expData.company || ''}">
                        <input type="text" class="p-2 border rounded exp-start" placeholder="Start Date" value="${expData.start || ''}">
                        <input type="text" class="p-2 border rounded exp-end" placeholder="End Date" value="${expData.end || ''}">
                    </div>
                    <textarea class="w-full p-2 border rounded exp-desc" placeholder="Description">${expData.description || ''}</textarea>
                    <button onclick="removeExperience('${expId}')" class="text-red-600 mt-2">Remove</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', expHtml);
        }

        function addEducation(eduData = {}) {
            const container = document.getElementById('educationContainer');
            const eduId = 'edu_' + Date.now();
            const eduHtml = `
                <div class="border rounded-lg p-4 mb-4" data-id="${eduId}">
                    <div class="grid grid-cols-2 gap-4">
                        <input type="text" class="p-2 border rounded edu-degree" placeholder="Degree" value="${eduData.degree || ''}">
                        <input type="text" class="p-2 border rounded edu-school" placeholder="Institution" value="${eduData.school || ''}">
                        <input type="text" class="p-2 border rounded edu-year" placeholder="Year" value="${eduData.year || ''}">
                        <input type="text" class="p-2 border rounded edu-gpa" placeholder="GPA" value="${eduData.gpa || ''}">
                    </div>
                    <button onclick="removeEducation('${eduId}')" class="text-red-600 mt-2">Remove</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', eduHtml);
        }

        function removeExperience(id) {
            document.querySelector(`[data-id="${id}"]`).remove();
        }

        function removeEducation(id) {
            document.querySelector(`[data-id="${id}"]`).remove();
        }

        // ==================== RESUME GENERATOR ====================
        function generateResume() {
            const resumeContent = `
                <h2 class="text-2xl font-bold mb-4">${userProfile.personal?.fullName || 'Your Name'}</h2>
                <p class="text-gray-600 mb-4">${userProfile.personal?.professionalTitle || 'Professional'}</p>
                
                <div class="mb-6">
                    <h3 class="font-semibold mb-2">Contact Information</h3>
                    <p>Email: ${userProfile.personal?.email || 'N/A'}</p>
                    <p>Phone: ${userProfile.personal?.phone || 'N/A'}</p>
                    <p>Location: ${userProfile.personal?.location || 'N/A'}</p>
                </div>

                <div class="mb-6">
                    <h3 class="font-semibold mb-2">Professional Summary</h3>
                    <p>${userProfile.summary || 'Your professional summary'}</p>
                </div>

                <div class="mb-6">
                    <h3 class="font-semibold mb-2">Skills</h3>
                    <p>${userProfile.skills || 'Your skills'}</p>
                </div>
            `;
            document.getElementById('resumePreview').innerHTML = resumeContent;
            alert('Resume generated!');
        }

        function downloadPDF() {
            alert('PDF download would be generated in production');
        }

        function downloadWord() {
            alert('Word document would be generated in production');
        }

        function enhanceWithAI() {
            alert('AI enhancement feature - This would use OpenAI in production');
        }

        // ==================== JOB MATCHER ====================
        function analyzeJob() {
            const jobDesc = document.getElementById('jobDescription').value;
            if (!jobDesc) {
                alert('Please paste a job description');
                return;
            }

            // Simulate AI analysis
            document.getElementById('skillsMatch').textContent = '85%';
            document.getElementById('experienceMatch').textContent = '78%';
            document.getElementById('matchScores').classList.remove('hidden');
            
            document.getElementById('matchResults').innerHTML = `
                <h4 class="font-semibold mb-2">AI Analysis Complete</h4>
                <p class="text-sm mb-4">Your profile matches well with this position.</p>
                <ul class="text-sm space-y-1">
                    <li>‚úÖ Strong skills alignment</li>
                    <li>‚úÖ Relevant experience detected</li>
                    <li>üìù Consider emphasizing your leadership experience</li>
                </ul>
            `;
        }

        // ==================== UI MANAGEMENT ====================
        function showAuth() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('appSection').classList.add('hidden');
            document.getElementById('authButtons').classList.remove('hidden');
            document.getElementById('userMenu').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('appSection').classList.remove('hidden');
            document.getElementById('authButtons').classList.add('hidden');
            document.getElementById('userMenu').classList.remove('hidden');
            document.getElementById('userGreeting').textContent = `Hi, ${userProfile.personal?.fullName || 'User'}`;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('border-blue-600', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-600');
            });
            
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            event.target.classList.add('border-blue-600', 'text-blue-600');
        }

        function showProfileSection(sectionName) {
            document.querySelectorAll('.profile-section').forEach(section => section.classList.add('hidden'));
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            document.querySelectorAll('#profileTab button').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-700');
                btn.classList.add('text-gray-700', 'hover:bg-gray-50');
            });
            event.target.classList.add('bg-blue-50', 'text-blue-700');
        }

        function updateProgress() {
            let progress = 0;
            if (userProfile.personal?.fullName) progress += 25;
            if (userProfile.summary) progress += 25;
            if (userProfile.experience?.length > 0) progress += 25;
            if (userProfile.skills) progress += 25;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('overallProgress').textContent = progress + '%';
        }

        // ==================== INITIALIZATION ====================
        auth.onAuthStateChanged((user) => {
            if (user) {
                currentUser = user;
                showApp();
                loadUserProfile();
            } else {
                showAuth();
            }
        });

        // Initialize first sections
        document.addEventListener('DOMContentLoaded', function() {
            showProfileSection('personal');
        });
    </script>
</body>
</html>
